<!DOCTYPE html>
<html lang='pt-BR'>

<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>Smart Light</title>
</head>

<body>
  <section class='section'>
    <div class='container'>
      <h1 class='title'>
        Smart Light
      </h1>
      <p class='subtitle'>
        Controle sua l√¢mpada aqui!
      </p>
    </div>
  </section>
  <section class='section'>
    <div class='container'>
      <form>
        <div class='field'>
          <label class='label'>Luminosidade:</label>
          <div class='control'>
            <input id='lumi' class='input' type='number' max='1024' min='0' placeholder='Ex.: 50' onchange='onChangeLuminosityValue' />
          </div>
        </div>
        <div class='field is-grouped'>
          <div class='control'>
            <button class='button is-success' type='button' onclick='sendChangeLuminosity()'>
              Enviar
            </button>
          </div>
        </div>
        <div class='is-divider'></div>
        <div class='field'>
          <div class='control'>
            <button class='button is-success' type='button' onclick='sendEnableLDR()'>
              Ativar sensor de luminosidade
            </button>
          </div>
        </div>
        <div class='is-divider'></div>
      </form>
    </div>
  </section>
</body>

<script>

  function onChangeLuminosityValue() {
    console.log('safado');
  }

  async function sendEnableLDR() {
    const url = 'http://192.168.1.1/led-auto-bright';
    const options = {
      method: 'POST',
      mode: 'no-cors',
      cache: 'no-cache',
      body: true,
    };
    const response = await fetch(url, options);
    console.log(response);
  }

  async function sendChangeLuminosity() {
    const luminosityInput = document.getElementById('lumi');

    if (!luminosityInput) {
      return;
    }

    if (luminosityInput.value > 1024) {
      alert('O valor de ser entre 0 e 1024');
      return;
    }

    const url = 'http://192.168.1.1/led-bright';
    const options = {
      method: 'POST',
      mode: 'no-cors',
      cache: 'no-cache',
      body: luminosityInput.value,
    };
    const response = await fetch(url, options);

    console.log(response);
  }
  
</script>

<style>
body,
button,
input,
optgroup,
select,
textarea {
  font-family: BlinkMacSystemFont, -apple-system, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
}
</style>

</html>

